<!DOCTYPE html>
<html>

<head>
  <title></title>
  <meta charset="UTF-8"/>
  <link href= "reset.css" rel= "stylesheet">
  <link href = "main.css" rel = "stylesheet" >
</head>

<body>
  <h1>Etch your sketch bro!</h1>

  <div id='container'></div>

  <div>
    <button type="button" id='clear-button'>Clear</button>
  </div>

  <div class='palette'>
    <div id='black'></div>
    <div id='red'></div>
    <div id='orange'></div>
    <div id='yellow'></div>
    <div id='green'></div>
    <div id='royalblue'></div>
    <div id='rebeccapurple'></div>
    <div id='orchid'></div>
    <div id='white'>Eraser</div>
  </div>

</body>


<script>

  const container = document.getElementById('container');
  const cells = document.getElementsByClassName('cell')
  const clearButton = document.getElementById('clear-button');
  const palette = document.getElementsByClassName('palette')

  let userColor = 'black';
  clearButton.addEventListener('click', clearGrid);

  function makeGrid(rows, columns) {
    container.style.setProperty('--grid-rows', rows);
    container.style.setProperty('--grid-columns', columns);

    for (let i = 0; i < rows*columns; i++) {
      const div = document.createElement('div');
      div.classList.add('cell');
      container.appendChild(div);
    }
    paintGrid(userColor);
  }

  function paintGrid (userColor) {
    Array.from(cells).forEach(cell => cell.addEventListener('mouseover', function(e) {
      e.target.style.backgroundColor = userColor;
    }));
  }
  
  function initColorPalette () {
    Array.from(palette).forEach(color => color.addEventListener('click', function(e) {
      userColor = e.target.id;
      paintGrid(userColor);
    }));
  }

  function clearGrid() {
    let gridSize;
    do {
      gridSize = prompt("Enter a number for the grid size between 2 and 90");
    } while (gridSize < 2 || gridSize > 90);
    makeGrid(gridSize,gridSize);
    Array.from(cells).forEach(cell => cell.style.backgroundColor = 'white');
  }

  makeGrid(16,16);
  initColorPalette();

</script>

</html>